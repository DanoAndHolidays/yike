<div align="center">

![logo](/logo.png) ![](/icon.png)

# 一刻短剧

![](https://img.shields.io/badge/Sass-953357) ![](https://img.shields.io/badge/Vite-FFAB00) ![](https://img.shields.io/badge/JSes6-FFCA28) ![](https://img.shields.io/badge/Pinia-fFD551) ![](https://img.shields.io/badge/Vue3-41B883) ![](https://img.shields.io/badge/ElementPlus-44A3FF) ![](https://img.shields.io/badge/CSS3-7E57C2)

</div>

### 项目地址

[一刻短剧：](https://danoandholidays.github.io/yike/)https://danoandholidays.github.io/yike/ _推荐使用移动设备打开_

### 项目介绍

**一刻短剧** 基于Apifox公开项目 **「悦享好剧」** 开发，仅做学习研究使用。由于短剧竖屏播放，所以全面**模仿抖音**，专注于短剧的竖屏播放体验，前端界面将模仿抖音的交互与视觉风格。

也算是我之前开发的网站 [PLAYLET-APP](https://danoandholidays.github.io/PLAYLET-APP/) 的二次开发。之前的项目，原生开发功能全靠手撸，所以有很多问题和没有写完的部分，我也不打算改了，直接重新写一个。

若有Bug请发邮件或在GitHub中提出issue。

### 功能实现

- 「首页」类抖音滑动加载（随机的短剧
- 「分类」短剧分类
- 「上传」调用摄像头，记录生活
- 「追剧」剧集信息、选集信息
- 「我的」个人信息展示（数据存储于本地
- 观看记录、收藏与喜欢（存储于本地
- 微信分享短剧

<div align="center">

<div >

</div>

![](/demoMine.png)
_(左侧一刻短剧，右侧抖音)_

![yike](yike.gif)

</div>

### API与请求库

基于Apifox悦享好剧开发（希望项目一直开放...）但仅有短剧相关、分类的部分。使用Axios发送请求

### 适配问题

- 适配绝大多数的桌面浏览器，推荐在浏览器中开启**开发者模式**（按F12）并切换**设备仿真**为安卓机型，体验移动端效果
- 部分手机机型不能通过点击将视频暂停（iPhone 14 Pro Max）
- 目前苹果机型不能自动播放

---

### 项目路线图

1.  **第一阶段 (核心体验)**：实现基于Video.js的单视频播放器，验证服务器Range请求与拖拽功能。✅
2.  **第二阶段 (核心交互)**：开发上下滑动的容器组件，实现视频的切换逻辑与基本预加载。（重难点）✅
3.  **第三阶段 (优化与扩展)**：完善UI细节（加载状态、错误处理）、用户系统（点赞、收藏）、剧集选择等功能。✅

---

# 开发日志

### 9.17.25

- 每次请求15条，再维护一个数组，存三条，上划一条，当前一条，下滑一条。
- 当15条请求的12条的时候，再次请求，覆盖请求，但是最多15条。
- 初步完成了滑动切换视频，`overflow: scroll`我能记得一辈子你

### 9.18.25

- 今天把点击和滑动区分一下❎
- 折腾半天，添加了滚轮、上下键和鼠标手指的滑动切换视频功能，添加了props所传递的数据。有点不太跟手，但是效果还是可以的，太跟手可能会影响性能，所有频繁触发的事件处理函数handle都对应添加了节流和防抖，lodash的库还真是好用🥵👍
- 滑动切换视频这个功能基本上是完成了

### 9.19.25

- 接下来就是维护视频队列了，由最初的3条->5条，动态更新队列时，滚动会出现一些问题✅
- 再把Element的message框的样式修改一下，区分点击和滑动❎
- 添加暂停、结束播放的样式，添加视频poster✅

### 9.20.25

- 将Element的message框的样式修改一下，改为了黑底白字，区分点击和滑动✅
- 使用Pinia新建一个store，用来存储用户信息，并且使用插件[pinia-plugin-persistedstate](https://github.com/prazdevs/pinia-plugin-persistedstate)实现浏览器本地存储✅
- 设计开屏界面，使用Pinia存储应用运行信息，便于管理✅
- 将其余的三页框架搭建起来，而且还重构了项目架构，组件之间的关系更加合理✅

核心的随机短剧功能已经完成，剩余时间将静态的界面写完

### 9.21.25

- 优化抽屉的绑定位置，添加静态的我的页❎

今天玩了一天，啥也没干😅另外就是GIF必须直接放在根目录，在文件夹里README显示不了

- 改了一下Message的样式，添加了一个灰色的边框#323232

### 9.22.25

- 添加动态背景水印❎

### 9.23.25

- 完成了静态的我的页✅

### 9.24.25

- test Actions。已成功配置简单的CI/CD流程，push时部署✅

### 9.25.25

- 优化抽屉的绑定位置，修改EL主题

### 9.25.25

- 完成分享抽屉的逻辑与样式

- 设计分页器，实现短剧的追剧模式，经我检查，手机很少用分页器，还是直接渲染吧。
- 完成对集数信息的渲染，页面很漂亮

### 9.26.25

- 优化抽屉样式，添加模糊，提示用户下滑修改交互逻辑，占70%屏幕，overflow区域也改为基于视口大小✅

- 优化了键盘和滚动的逻辑，在呼出剧集抽屉的时候，不会触发短视频组的滚动✅

- 添加加载动画，使用Keepalive与Transition组件实现丝滑过渡✅

- 构建本地剧集信息：应该构建一个类，使用构造函数初始化剧集信息存储对象。✅

- 添加完播后的追剧按钮，处理函数与剧集抽屉一致✅

- 优化加载页面的placeholder样式，与播放器对齐✅

### 9.27.25 目前工作重心（剧集页）（已完成

- 在剧集播放完后，会弹出类似剧集抽屉的内容，让用户去选择，追剧模式还是继续随机。✅

- 本地剧集信息：包括，是否喜欢，收藏，播放历史，观看记录（包括观看过的短剧与其集数）。虽然这样做可能会增加存储空间的消耗，但是也就不到1kb。使用这种方式，只能够在一个浏览器中保存观看记录。用户可以手动清除。✅

- 在使用使用了 pinia-plugin-persistedstate 或类似插件（{ persist: true }），它会把 state 转成 JSON 存在 localStorage。而Set和Map是不能够进行JSON化的。需要改进。✅

- 追剧和收藏的逻辑很像，就不做区分了。✅

- 使用nextTick和 **函数式 ref** 的写法完成了观看过的剧集和正在观看的剧集的展示，与滚动。✅

### 可能的方向

- 剧集页将内容改换为喜欢、收藏、历史等分类。用户点击追剧模式，就会自动的跳转到剧集页并且将短剧添加到追剧处，在剧集页中可以进入追剧模式

- 追剧模式：是和首页几乎一样的，除了播放的视频列表全部转换为剧集内的，并且不会走鉴权接口，而是会直接请求地址。减少请求的发出。

- 添加追剧模式提醒功能，一次提醒，可选不再提醒

- 首页navbar的分类
- 分类页怎么搞啊？

### 待完成...（最后做）

- 优化并发请求的性能问题
- 添加播放完成后的剧集选择功能，使用和侧边栏的同一接口
- 添加微信分享功能
