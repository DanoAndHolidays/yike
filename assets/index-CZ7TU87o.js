import{u as y}from"./useDramaStore-JKIbRy_r.js";import{_ as S,c as m,o as u,a as e,d as _,w as h,f as $,m as b,t as p,p as M,n as R,u as f,g as C,r as k,i as D,h as w,F as I,b as x,k as L,l as N}from"./index--Yzb7obU.js";import{u as H}from"./useDramaInfo-DCDf4g0i.js";const V={class:"header-container"},F={class:"content"},z={class:"content"},B={__name:"Statistic",setup(g){return y(),(t,o)=>{const c=$("ArrowLeft"),r=$("el-icon"),d=$("Delete");return u(),m("div",V,[e("div",F,[_(r,{style:{"vertical-align":"middle"},size:"22px"},{default:h(()=>[_(c)]),_:1})]),o[0]||(o[0]=e("div",{class:"content"},"剧集",-1)),e("div",z,[_(r,{style:{"vertical-align":"middle"},size:"22px"},{default:h(()=>[_(d)]),_:1})])])}}},E=S(B,[["__scopeId","data-v-e4212747"]]),P={class:"container"},Y={class:"episode-drawer"},T={class:"episode-info"},j=["src","alt"],O={class:"text"},q={class:"info"},G={class:"title"},J={class:"details"},K={class:"content"},Q={__name:"InfoCard",props:{episode:{type:Number},episode_total:{type:Number},img:{type:String},title:{type:String},time:{type:String},watchedNum:{type:Number},vid:Number},setup(g){const t=g,o=y();function c(n){n instanceof Date||(n=new Date(n));const l=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),i=String(n.getHours()).padStart(2,"0"),v=String(n.getMinutes()).padStart(2,"0");return`${l}-${a}-${s} ${i}:${v}`}const r=b(()=>o.getWatchRecord(t?.vid).value?.timestamp?c(o.getWatchRecord(t.vid).value.timestamp):"暂无数据"),d=()=>{o.toggleCollection(t.vid),o.isCollected(t.vid).value?C("已收藏"):C("已取消")};return(n,l)=>(u(),m("div",P,[e("div",Y,[e("div",T,[e("img",{src:t.img,alt:t.title},null,8,j),e("div",O,[e("div",q,[e("div",G,p(t.title),1),e("div",{class:"head",onClick:M(d,["stop","prevent"])},[e("div",{class:R({coll:f(o).isCollected(t.vid).value,normal:!f(o).isCollected(t.vid).value})},p(f(o).isCollected(t.vid).value?"已收藏":"未收藏"),3)])]),e("div",J,[e("div",K,[e("div",null,"总剧集   "+p(t.episode_total),1),e("div",null,p(r.value),1)])])])])])]))}},U=S(Q,[["__scopeId","data-v-008181b8"]]),X={class:"container1"},Z={__name:"Collection",setup(g){const t=H(),o=k([]),c=y(),r=async()=>{const l=c.getCollections();let a=await Promise.all(l.map(async s=>{let i=t.isHas(s);return i?(i.vid=s,i):{}}));o.value=a.reverse()};D(()=>{r()});const d=w(),n=l=>{N.push("detail"),d.setVidAndShowDetail(l)};return(l,a)=>(u(),m("div",X,[(u(!0),m(I,null,x(o.value,s=>(u(),L(U,{key:s?.vid,episode:s?.episode,episode_total:s?.episode_total,img:s?.img,title:s?.title,vid:s?.vid,onClick:i=>n(s?.vid)},null,8,["episode","episode_total","img","title","vid","onClick"]))),128))]))}},tt=S(Z,[["__scopeId","data-v-7b1fb78b"]]),et={class:"container"},st={class:"episode-drawer"},ot={class:"episode-info"},nt=["src","alt"],it={class:"text"},at={class:"info"},ct={class:"title"},lt={class:"details"},rt={class:"content"},dt={__name:"LikeInfoCard",props:{episode:{type:Number},episode_total:{type:Number},img:{type:String},title:{type:String},time:{type:String},watchedNum:{type:Number},vid:Number},setup(g){const t=g,o=y();function c(n){n instanceof Date||(n=new Date(n));const l=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),i=String(n.getHours()).padStart(2,"0"),v=String(n.getMinutes()).padStart(2,"0");return`${l}-${a}-${s} ${i}:${v}`}const r=b(()=>o.getWatchRecord(t?.vid).value?.timestamp?c(o.getWatchRecord(t.vid).value.timestamp):"暂无数据"),d=()=>{o.toggleLike(t.vid),o.isLiked(t.vid).value?C("已添加"):C("已取消")};return(n,l)=>(u(),m("div",et,[e("div",st,[e("div",ot,[e("img",{src:t.img,alt:t.title},null,8,nt),e("div",it,[e("div",at,[e("div",ct,p(t.title),1),e("div",{class:"head",onClick:M(d,["stop","prevent"])},[e("div",{class:R({coll:f(o).isLiked(t.vid).value,normal:!f(o).isLiked(t.vid).value})},p(f(o).isLiked(t.vid).value?"已添加":"已取消"),3)])]),e("div",lt,[e("div",rt,[e("div",null,"总剧集   "+p(t.episode_total),1),e("div",null,p(r.value),1)])])])])])]))}},_t=S(dt,[["__scopeId","data-v-bd5ddc05"]]),ut={class:"like-container"},pt={__name:"Like",setup(g){const t=H(),o=k([]),c=y(),r=async()=>{const l=c.getLikes();let a=await Promise.all(l.map(async s=>{let i=t.isHas(s);return i?(i.vid=s,i):{}}));o.value=a.reverse()};D(()=>{r()});const d=w(),n=l=>{N.push("detail"),d.setVidAndShowDetail(l)};return(l,a)=>(u(),m("div",ut,[(u(!0),m(I,null,x(o.value,s=>(u(),L(_t,{key:s?.vid,episode:s?.episode,episode_total:s?.episode_total,img:s?.img,title:s?.title,vid:s?.vid,onClick:i=>n(s?.vid)},null,8,["episode","episode_total","img","title","vid","onClick"]))),128))]))}},vt=S(pt,[["__scopeId","data-v-794aa59d"]]),mt={class:"his-card-container"},gt=["src"],ht={class:"info"},ft={__name:"HistoryCard",props:{img:String,vid:Number,title:String,lastEpisode:Number,time:String},setup(g){const t=g;return(o,c)=>(u(),m("div",mt,[e("img",{src:t.img},null,8,gt),e("div",ht,p(t.time??"34"),1)]))}},St=S(ft,[["__scopeId","data-v-f7415a77"]]),$t={class:"history-container"},yt={__name:"History",setup(g){const t=H(),o=k([]),c=y(),r=async()=>{const a=c.getWatchRecordAll();let s=await Promise.all(a.map(async i=>{let v=t.isHas(i[0]);return v?(v.vid=i[0],v.time=d(i[1].timestamp),v):{}}));o.value=s.reverse()};D(()=>{r()});function d(a){a instanceof Date||(a=new Date(a));const s=a.getFullYear(),i=String(a.getMonth()+1).padStart(2,"0"),v=String(a.getDate()).padStart(2,"0"),W=String(a.getHours()).padStart(2,"0"),A=String(a.getMinutes()).padStart(2,"0");return`${s}-${i}-${v} ${W}:${A}`}b(()=>c.getWatchRecord(props?.vid).value?.timestamp?d(c.getWatchRecord(props.vid).value.timestamp):"暂无数据");const n=w(),l=a=>{N.push("detail"),n.setVidAndShowDetail(a)};return(a,s)=>(u(),m("div",$t,[(u(!0),m(I,null,x(o.value,i=>(u(),L(St,{class:"con",title:i.title,img:i.img,time:i.time,onClick:v=>l(i.vid)},null,8,["title","img","time","onClick"]))),256))]))}},Ct=S(yt,[["__scopeId","data-v-95915776"]]),bt={class:"container"},kt={class:"custom-tabs-label"},Dt={class:"custom-tabs-label"},wt={class:"custom-tabs-label"},It=Object.assign({name:"Episode"},{__name:"index",setup(g){const t=y();return(o,c)=>{const r=$("Clock"),d=$("el-icon"),n=$("el-tab-pane"),l=$("el-tabs");return u(),m("div",bt,[_(E),_(l,{stretch:!0,class:"tab-header"},{default:h(()=>[_(n,null,{label:h(()=>[e("span",kt,[_(d,{style:{"vertical-align":"middle"},size:"21px"},{default:h(()=>[_(r)]),_:1}),e("div",null,"历史 "+p(f(t).watchRecordsCount),1)])]),default:h(()=>[_(Ct)]),_:1}),_(n,null,{label:h(()=>[e("span",Dt,[c[0]||(c[0]=e("i",{class:"fa-solid fa-star fa-lg"},null,-1)),e("div",null,"收藏 "+p(f(t).collectionsCount),1)])]),default:h(()=>[_(tt)]),_:1}),_(n,null,{label:h(()=>[e("span",wt,[c[1]||(c[1]=e("i",{class:"fa-solid fa-heart fa-lg"},null,-1)),e("div",null,"喜欢 "+p(f(t).likesCount),1)])]),default:h(()=>[_(vt)]),_:1})]),_:1})])}}}),Ht=S(It,[["__scopeId","data-v-076f0add"]]);export{Ht as default};
