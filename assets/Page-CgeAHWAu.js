import{_ as R,r as u,i as z,c as i,o as d,a as o,M as W,N as f,F as v,b,n as w,t as B,e as S,q as x,O as C,l as D,B as L}from"./index--Yzb7obU.js";import{u as M}from"./useDramaStore-JKIbRy_r.js";const N={class:"info"},P=["onClick"],$={__name:"Page",props:{vid:Number,size:Boolean},emits:["onToEpisodeMode"],setup(h,{emit:g}){const a=h,l=M(),m=s=>{const e=l.getWatchRecord(a.vid)?.value;return e?e.episodes.has(s):!1},y=s=>{const e=l.getWatchRecord(a.vid)?.value;return e?e.lastEpisode===s:!1},c=u([]),p={},n=u(null),E=async(s,e,t)=>{let r=await x(s,e,t);c.value=await r.data.data.data,C(()=>{_()})},_=()=>{const s=l.getWatchRecord(a.vid)?.value?.lastEpisode??1,e=p[s];if(e&&n.value){const t=e.offsetTop-n.value.offsetTop;n.value.scrollTo({top:t-n.value.clientHeight/2+e.clientHeight/2,behavior:"smooth"})}};z(()=>{E(a.vid,1,1e3)});const T=g;L();const k=(s,e)=>{T("onToEpisodeMode",!0),D.push(`/play/${s}/${e}`)};return(s,e)=>(d(),i(v,null,[o("div",N,[W(s.$slots,"default",{},void 0,!0)]),o("div",{class:"container",style:f(a.size?"height:55vh;":"")},[e[0]||(e[0]=o("div",{class:"fade-top"},null,-1)),o("div",{class:"content",ref_key:"contentWrapper",ref:n,style:f(a.size?"height:45vh;":"")},[(d(!0),i(v,null,b(c.value,t=>(d(),i("div",{key:t.url,ref_for:!0,ref:r=>p[t.eid]=r,class:w({wached:m(t.eid),lasted:y(t.eid)}),onClick:r=>k(t.vid,t.eid)},B(t.episode),11,P))),128))],4),e[1]||(e[1]=o("div",{class:"fade-bottom"},null,-1)),e[2]||(e[2]=o("div",{class:"footer"},[S(" Copyright ©2025 Dano "),o("br"),o("span",{style:{"font-size":"0.7rem",opacity:"0.8"}},"「一刻」短剧  |  由Dano开发，仅学习使用")],-1))],4)],64))}},H=R($,[["__scopeId","data-v-37034f8e"]]);export{H as P};
