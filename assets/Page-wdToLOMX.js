import{a as R}from"./play-jhidQSpQ.js";import{_ as z,r as S}from"./index-Ce-6gBt7.js";import{u as W}from"./useDramaStore-BBnnkSYd.js";import{u as b}from"./vue-ecosystem-D9FQmOGZ.js";import{r as u,e as w,a as l,o as d,s as o,b as x,t as f,S as v,aG as B,v as C,y as D,x as L,n as P}from"./vue-chunks-DYiGSM6T.js";const $={class:"info"},M=["onClick"],N={__name:"Page",props:{vid:Number,size:Boolean},emits:["onToEpisodeMode"],setup(m,{emit:h}){const a=m,i=W(),g=s=>{const e=i.getWatchRecord(a.vid)?.value;return e?e.episodes.has(s):!1},y=s=>{const e=i.getWatchRecord(a.vid)?.value;return e?e.lastEpisode===s:!1},c=u([]),p={},r=u(null),E=async(s,e,t)=>{let n=await R(s,e,t);c.value=await n.data.data.data,P(()=>{_()})},_=()=>{const s=i.getWatchRecord(a.vid)?.value?.lastEpisode??1,e=p[s];if(e&&r.value){const t=e.offsetTop-r.value.offsetTop;r.value.scrollTo({top:t-r.value.clientHeight/2+e.clientHeight/2,behavior:"smooth"})}};w(()=>{E(a.vid,1,1e3)});const T=h;b();const k=(s,e)=>{T("onToEpisodeMode",!0),S.push(`/play/${s}/${e}`)};return(s,e)=>(d(),l(v,null,[o("div",$,[x(s.$slots,"default",{},void 0,!0)]),o("div",{class:"container",style:f(a.size?"height:55vh;":"")},[e[0]||(e[0]=o("div",{class:"fade-top"},null,-1)),o("div",{class:"content",ref_key:"contentWrapper",ref:r,style:f(a.size?"height:45vh;":"")},[(d(!0),l(v,null,B(c.value,t=>(d(),l("div",{key:t.url,ref_for:!0,ref:n=>p[t.eid]=n,class:C({wached:g(t.eid),lasted:y(t.eid)}),onClick:n=>k(t.vid,t.eid)},D(t.episode),11,M))),128))],4),e[1]||(e[1]=o("div",{class:"fade-bottom"},null,-1)),e[2]||(e[2]=o("div",{class:"footer"},[L(" Copyright ©2025 Dano "),o("br"),o("span",{style:{"font-size":"0.7rem",opacity:"0.8"}},"「一刻」短剧  |  由Dano开发，仅学习使用")],-1))],4)],64))}},I=z(N,[["__scopeId","data-v-37034f8e"]]);export{I as P};
