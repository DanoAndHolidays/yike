import{d as n}from"./vue-ecosystem-D9FQmOGZ.js";import{J as m,w as l}from"./vue-chunks-DYiGSM6T.js";class r{constructor(a){this.dramaInfo=new Map((a??[]).map(e=>[e.vid,{eid:e.eid,curEpisode:e.episode,episode_total:e.episode_total,title:e.title,img:e.img}]))}updateDramaInfo({eid:a,episode:e,episode_total:s,title:i,img:t,vid:d}){this.dramaInfo.has(d)||this.dramaInfo.set(d,{eid:a,curEpisode:e,episode_total:s,title:i,img:t})}getDramaInfo(a){return this.dramaInfo.has(a)?this.dramaInfo.get(a):null}toJOSN(){return{dramaInfo:Array.from(this.dramaInfo.entries()).map(([a,e])=>({vid:a,curEpisode:e.curEpisode,episode_total:e.episode_total,title:e.title,img:e.img,eid:e.eid}))}}clear(){this.dramaInfo.clear()}static fromJSON(a){return new r(a)}}const I=n("dramaInfo",()=>{const o=localStorage.getItem("dramaInfo"),a=m(o?r.fromJSON(JSON.parse(o).dramaInfo):new r);return l(a,t=>{localStorage.setItem("dramaInfo",JSON.stringify(t.toJOSN()))},{deep:!0}),{infoManager:a,isHas:t=>a.getDramaInfo(t),clearAll:()=>{a.clear(),localStorage.removeItem("dramaInfo")},updateDramaInfo:t=>{a.updateDramaInfo(t)}}});export{I as u};
