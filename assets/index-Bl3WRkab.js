import"./element-core-8PBMEAXG.js";import{u as $}from"./useDramaStore-pHbH2peN.js";import{_ as S,u as b,r as k}from"./index-BQ4r-PLg.js";import{E as M,a as A,b as z}from"./element-components-CS5vr7ci.js";import{a as m,o as u,s as e,k as _,l as h,ap as C,c as D,y as p,V as R,v as E,u as f,r as w,e as I,S as x,aG as L,j as N}from"./vue-chunks-sUkSM7pP.js";import{c as y}from"./message-CyqYtgxA.js";import{u as H}from"./useDramaInfo-CyuMVg6w.js";import"./vue-ecosystem-CD19DsTg.js";import"./vendor-other-BTrOqZDZ.js";import"./axios-http-ngrFHoWO.js";import"./element-utils-CJlHjHNO.js";import"./lodash-utils-DTPND14t.js";const B={class:"header-container"},F={class:"content"},P={class:"content"},T={__name:"Statistic",setup(g){return $(),(t,o)=>{const c=C("ArrowLeft"),r=M,d=C("Delete");return u(),m("div",B,[e("div",F,[_(r,{style:{"vertical-align":"middle"},size:"22px"},{default:h(()=>[_(c)]),_:1})]),o[0]||(o[0]=e("div",{class:"content"},"剧集",-1)),e("div",P,[_(r,{style:{"vertical-align":"middle"},size:"22px"},{default:h(()=>[_(d)]),_:1})])])}}},Y=S(T,[["__scopeId","data-v-e4212747"]]),j={class:"container"},G={class:"episode-drawer"},O={class:"episode-info"},q=["src","alt"],J={class:"text"},K={class:"info"},Q={class:"title"},U={class:"details"},X={class:"content"},Z={__name:"InfoCard",props:{episode:{type:Number},episode_total:{type:Number},img:{type:String},title:{type:String},time:{type:String},watchedNum:{type:Number},vid:Number},setup(g){const t=g,o=$();function c(n){n instanceof Date||(n=new Date(n));const l=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),i=String(n.getHours()).padStart(2,"0"),v=String(n.getMinutes()).padStart(2,"0");return`${l}-${a}-${s} ${i}:${v}`}const r=D(()=>o.getWatchRecord(t?.vid).value?.timestamp?c(o.getWatchRecord(t.vid).value.timestamp):"暂无数据"),d=()=>{o.toggleCollection(t.vid),o.isCollected(t.vid).value?y("已收藏"):y("已取消")};return(n,l)=>(u(),m("div",j,[e("div",G,[e("div",O,[e("img",{src:t.img,alt:t.title},null,8,q),e("div",J,[e("div",K,[e("div",Q,p(t.title),1),e("div",{class:"head",onClick:R(d,["stop","prevent"])},[e("div",{class:E({coll:f(o).isCollected(t.vid).value,normal:!f(o).isCollected(t.vid).value})},p(f(o).isCollected(t.vid).value?"已收藏":"未收藏"),3)])]),e("div",U,[e("div",X,[e("div",null,"总剧集   "+p(t.episode_total),1),e("div",null,p(r.value),1)])])])])])]))}},tt=S(Z,[["__scopeId","data-v-008181b8"]]),et={class:"container1"},st={__name:"Collection",setup(g){const t=H(),o=w([]),c=$(),r=async()=>{const l=c.getCollections();let a=await Promise.all(l.map(async s=>{let i=t.isHas(s);return i?(i.vid=s,i):{}}));o.value=a.reverse()};I(()=>{r()});const d=b(),n=l=>{k.push("detail"),d.setVidAndShowDetail(l)};return(l,a)=>(u(),m("div",et,[(u(!0),m(x,null,L(o.value,s=>(u(),N(tt,{key:s?.vid,episode:s?.episode,episode_total:s?.episode_total,img:s?.img,title:s?.title,vid:s?.vid,onClick:i=>n(s?.vid)},null,8,["episode","episode_total","img","title","vid","onClick"]))),128))]))}},ot=S(st,[["__scopeId","data-v-7b1fb78b"]]),nt={class:"container"},it={class:"episode-drawer"},at={class:"episode-info"},ct=["src","alt"],lt={class:"text"},rt={class:"info"},dt={class:"title"},_t={class:"details"},ut={class:"content"},pt={__name:"LikeInfoCard",props:{episode:{type:Number},episode_total:{type:Number},img:{type:String},title:{type:String},time:{type:String},watchedNum:{type:Number},vid:Number},setup(g){const t=g,o=$();function c(n){n instanceof Date||(n=new Date(n));const l=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),i=String(n.getHours()).padStart(2,"0"),v=String(n.getMinutes()).padStart(2,"0");return`${l}-${a}-${s} ${i}:${v}`}const r=D(()=>o.getWatchRecord(t?.vid).value?.timestamp?c(o.getWatchRecord(t.vid).value.timestamp):"暂无数据"),d=()=>{o.toggleLike(t.vid),o.isLiked(t.vid).value?y("已添加"):y("已取消")};return(n,l)=>(u(),m("div",nt,[e("div",it,[e("div",at,[e("img",{src:t.img,alt:t.title},null,8,ct),e("div",lt,[e("div",rt,[e("div",dt,p(t.title),1),e("div",{class:"head",onClick:R(d,["stop","prevent"])},[e("div",{class:E({coll:f(o).isLiked(t.vid).value,normal:!f(o).isLiked(t.vid).value})},p(f(o).isLiked(t.vid).value?"已添加":"已取消"),3)])]),e("div",_t,[e("div",ut,[e("div",null,"总剧集   "+p(t.episode_total),1),e("div",null,p(r.value),1)])])])])])]))}},vt=S(pt,[["__scopeId","data-v-bd5ddc05"]]),mt={class:"like-container"},gt={__name:"Like",setup(g){const t=H(),o=w([]),c=$(),r=async()=>{const l=c.getLikes();let a=await Promise.all(l.map(async s=>{let i=t.isHas(s);return i?(i.vid=s,i):{}}));o.value=a.reverse()};I(()=>{r()});const d=b(),n=l=>{k.push("detail"),d.setVidAndShowDetail(l)};return(l,a)=>(u(),m("div",mt,[(u(!0),m(x,null,L(o.value,s=>(u(),N(vt,{key:s?.vid,episode:s?.episode,episode_total:s?.episode_total,img:s?.img,title:s?.title,vid:s?.vid,onClick:i=>n(s?.vid)},null,8,["episode","episode_total","img","title","vid","onClick"]))),128))]))}},ht=S(gt,[["__scopeId","data-v-794aa59d"]]),ft={class:"his-card-container"},St=["src"],$t={class:"info"},yt={__name:"HistoryCard",props:{img:String,vid:Number,title:String,lastEpisode:Number,time:String},setup(g){const t=g;return(o,c)=>(u(),m("div",ft,[e("img",{src:t.img},null,8,St),e("div",$t,p(t.time??"34"),1)]))}},Ct=S(yt,[["__scopeId","data-v-f7415a77"]]),bt={class:"history-container"},kt={__name:"History",setup(g){const t=H(),o=w([]),c=$(),r=async()=>{const a=c.getWatchRecordAll();let s=await Promise.all(a.map(async i=>{let v=t.isHas(i[0]);return v?(v.vid=i[0],v.time=d(i[1].timestamp),v):{}}));o.value=s.reverse()};I(()=>{r()});function d(a){a instanceof Date||(a=new Date(a));const s=a.getFullYear(),i=String(a.getMonth()+1).padStart(2,"0"),v=String(a.getDate()).padStart(2,"0"),V=String(a.getHours()).padStart(2,"0"),W=String(a.getMinutes()).padStart(2,"0");return`${s}-${i}-${v} ${V}:${W}`}D(()=>c.getWatchRecord(props?.vid).value?.timestamp?d(c.getWatchRecord(props.vid).value.timestamp):"暂无数据");const n=b(),l=a=>{k.push("detail"),n.setVidAndShowDetail(a)};return(a,s)=>(u(),m("div",bt,[(u(!0),m(x,null,L(o.value,i=>(u(),N(Ct,{class:"con",title:i.title,img:i.img,time:i.time,onClick:v=>l(i.vid)},null,8,["title","img","time","onClick"]))),256))]))}},Dt=S(kt,[["__scopeId","data-v-95915776"]]),wt={class:"container"},It={class:"custom-tabs-label"},xt={class:"custom-tabs-label"},Lt={class:"custom-tabs-label"},Nt=Object.assign({name:"Episode"},{__name:"index",setup(g){const t=$();return(o,c)=>{const r=C("Clock"),d=M,n=z,l=A;return u(),m("div",wt,[_(Y),_(l,{stretch:!0,class:"tab-header"},{default:h(()=>[_(n,null,{label:h(()=>[e("span",It,[_(d,{style:{"vertical-align":"middle"},size:"21px"},{default:h(()=>[_(r)]),_:1}),e("div",null,"历史 "+p(f(t).watchRecordsCount),1)])]),default:h(()=>[_(Dt)]),_:1}),_(n,null,{label:h(()=>[e("span",xt,[c[0]||(c[0]=e("i",{class:"fa-solid fa-star fa-lg"},null,-1)),e("div",null,"收藏 "+p(f(t).collectionsCount),1)])]),default:h(()=>[_(ot)]),_:1}),_(n,null,{label:h(()=>[e("span",Lt,[c[1]||(c[1]=e("i",{class:"fa-solid fa-heart fa-lg"},null,-1)),e("div",null,"喜欢 "+p(f(t).likesCount),1)])]),default:h(()=>[_(ht)]),_:1})]),_:1})])}}}),Yt=S(Nt,[["__scopeId","data-v-076f0add"]]);export{Yt as default};
